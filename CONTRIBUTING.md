# Contributing to NXEnhanced

Welcome! We appreciate your interest in contributing to NXEnhanced (WebExtension version). Your help is valuable in making this extension even better. Here's how you can get started:

## Contribution Workflow

1.  **Fork the Repository**: Start by forking the main NXEnhanced repository to your own GitHub account.
2.  **Clone Your Fork**:
    ```bash
    git clone https://github.com/YOUR_USERNAME/NXEnhanced.git # Replace YOUR_USERNAME
    cd NXEnhanced
    ```
3.  **Create a New Branch**: Make your changes on a new branch, named descriptively:
    *   For new features: `git checkout -b feat/your-feature-name`
    *   For bug fixes: `git checkout -b fix/your-bug-fix-name`
4.  **Install Dependencies**: If you haven't already, install the project dependencies:
    ```bash
    npm install
    ```
5.  **Make Your Changes**: Implement your feature or bug fix.
    *   Refer to the "Code Conventions" and "Code Structure" sections below.
    *   Ensure you test your changes thoroughly (see "Testing").
6.  **Lint and Test**:
    ```bash
    npm run lint  # Check for linting errors
    npm test    # Run automated tests
    ```
    Please fix any errors or test failures before proceeding.
7.  **Commit Your Changes**: Write clear and concise commit messages.
    ```bash
    git add .
    git commit -m "feat: Implement amazing new feature" # Or "fix: Resolve critical bug"
    ```
8.  **Push to Your Fork**:
    ```bash
    git push origin feat/your-feature-name
    ```
9.  **Submit a Pull Request (PR)**:
    *   Go to the original NXEnhanced repository on GitHub.
    *   You should see a prompt to create a Pull Request from your recently pushed branch.
    *   Create the Pull Request, targeting the `main` branch (or an appropriate feature branch if specified by maintainers).
    *   Provide a clear title and description for your PR, explaining the changes and why they are needed. Link to any relevant issues.

## Code Conventions

*   **Language**: The WebExtension is primarily written in **TypeScript**.
*   **Style**: Follow the existing code style. We use ESLint to enforce coding standards. Run `npm run lint` to check your code.
*   **Comments**: Write comments for complex logic or non-obvious code sections.
*   **Readability**: Aim for clean, readable, and maintainable code.

## Code Structure (WebExtension)

A brief overview of the WebExtension's structure:

*   `src/content.ts`: This is the main content script that interacts directly with the NextDNS website's DOM. It handles UI enhancements, event listeners for new features, and communicates with the background script if needed.
*   `src/background.ts`: (If present, or intended for future use) Typically manages background tasks, persistent state, API calls that require broader permissions or a stable context (like log streaming initiation, or calls to external services like Gemini if not done directly from content script for simplicity). *Current implementation has Gemini calls in `content.ts`.*
*   `src/storage.js` (or `.ts`): A utility for interacting with `chrome.storage`.
*   `src/performance.js` (or `.ts`): Utilities for performance optimizations (e.g., debounce).
*   `WebExtension/dist/`: Contains the bundled and transpiled JavaScript files (`content.js`, `background.js`) that are actually loaded by the browser. These are generated by Webpack via `npm run build`.
*   `WebExtension/manifest.json`: The extension's manifest file, defining permissions, scripts, UI pages, etc.
*   `WebExtension/options-page.html` & `WebExtension/options-page.js`: Code for the extension's options page.
*   `WebExtension/popup.html` & `WebExtension/popup.js`: Code for the extension's browser action popup.
*   `tests/`: Contains Jest unit tests.

## Testing

*   **Automated Tests**: Run `npm test` to execute unit tests. Please add tests for new functionality where applicable.
*   **Manual Testing**:
    *   Thoroughly test your changes on the latest versions of **Google Chrome** and **Mozilla Firefox**.
    *   Check for expected behavior on all relevant NextDNS pages.
    *   Open the browser console (F12 > Console) and check for any errors or warnings related to your changes.
    *   Test with and without API keys configured to ensure graceful degradation or appropriate user prompts.

## Questions or Discussions

If you have questions, need clarification, or want to discuss your changes before implementing them, please:
*   Open an issue on the GitHub repository.
*   Start a discussion in your Pull Request.

Thank you for contributing to NXEnhanced! Your efforts help make it a better tool for everyone.
